<form [formGroup]="_FormGroup" novalidate>

  <div [ngClass]="stylesConfig.field">
    <div class="control">
      <textarea class="textarea" rows="1" placeholder="Form Name"
                [ngClass]="[stylesConfig.formNameInput,stylesConfig.input]" formControlName="formName"
                inputGrow></textarea>
    </div>
  </div>

  <div [ngClass]="stylesConfig.field">
    <div class="control">
      <textarea class="textarea" rows="1" placeholder="Description"
                [ngClass]="[stylesConfig.formDecsInput,stylesConfig.input]" formControlName="decs" inputGrow></textarea>
    </div>
  </div>


  <div formArrayName="questions" *ngIf="questions">

    <div *ngFor="let question of questions['controls']; let i=index" [formGroupName]="i"
         [ngClass]="stylesConfig.questionMain" [class.active]="i == selectedArea">
      {{getConsole(question[i])}}
      <!-- The repeated address template -->
      <div style="width:100%;">
        <nav class="level question">
          <div class="level-left">
            <div class="level-item">
              <label class="checkbox">
                <input type="checkbox">
                Required*
              </label>
            </div>
          </div>
          <div class="level-right">
            <div class="level-item">
              <button (click)="deleteQuestion(i)" class="button is-danger">Delete</button>
              <button class="button" (click)="duplicateItem(i)">Duplicate</button>



              <span class="select"
                    *ngIf="question[i].value.questionType == 'mc' || question[i].value.questionType == 'cb'">
            <select
              formControlName="answerAlign">
            <option value="v" selected>Vertical</option>
            <option value="h">Horizontal</option>
            </select>
          </span>
              <span class="select">
      <select [attr.wh]="i" (change)="questionType($event)"
              formControlName="questionType">
        <option value="wa">Write Area</option>
        <option value="mc" selected>Multiple Choise</option>
        <option value="cb">Checkbox</option>
        <option value="ls">Linear Scale</option>
        <option value="ta">Text Area</option>
        <option value="da">Date</option>
        <option value="na">Number Area</option>
      </select>
    </span>

            </div>
          </div>
        </nav>
        <div class="field ">
          <textarea class="textarea" rows="1"
                    placeholder="{{ (question[i].value.questionType == 'ta')? 'Text Area' : 'Question '+(i+1) }}"
                    [ngClass]="stylesConfig.input" formControlName="question" inputGrow></textarea>
        </div>


        <div [ngClass]="stylesConfig.answersMain" formArrayName="answers" class="well well-lg">

          <div *ngFor="let answer of question[i].controls.answer; let k=index">
            <div [formGroupName]="k">
              <div [ngClass]="stylesConfig.answer"
                   *ngIf="question[i].value.questionType == 'mc' || question[i].value.questionType == 'cb' || question[i].value.questionType == 'na'">

                <!-- The repeated address template -->
                <i (click)="deleteAnswer(i,k)" class="material-icons control">delete_forever</i>
                <i *ngIf="question[i].value.questionType == 'cb'"
                   class="material-icons">check_box_outline_blank</i>
                <i *ngIf="question[i].value.questionType == 'mc'"
                   class="material-icons">radio_button_unchecked</i>
                <i *ngIf="question[i].value.questionType == 'na'" class="material-icons">filter_4</i>
                <div [ngClass]="[stylesConfig.fieldHasAdd,'control','expand']">
                  <div class="control expand">
                  <textarea class="textarea" rows="1" placeholder="Answer {{k+1}}" [ngClass]="stylesConfig.answersInput"
                            formControlName="value" inputGrow></textarea>

                  </div>
                </div>
              </div>
              <!-- Question Type end -->

              <div [ngClass]="stylesConfig.answer" *ngIf="question[i].value.questionType == 'wa' ">
                <!-- The repeated address template -->
                <i class="material-icons control" style="opacity:0;">delete_forever</i>
                <i class="material-icons control" style="opacity:0;">delete_forever</i>
                <div [ngClass]="[stylesConfig.fieldHasAdd,'control','expand']">
                  <div class="control expand">
                  <textarea class="textarea" rows="2" placeholder="Descript to desired answer."
                            [ngClass]="stylesConfig.answersInput" formControlName="value" inputGrow></textarea>
                  </div>
                </div>
              </div>
              <!-- Question Type end -->


              <div [ngClass]="stylesConfig.answer" *ngIf="question[i].value.questionType == 'ls' ">
                <!-- The repeated address template -->
                <i class="material-icons control" style="opacity:0;">delete_forever</i>
                <i class="material-icons control" style="opacity:0;">delete_forever</i>
                <div [ngClass]="[stylesConfig.fieldHasAdd,'control']">
                  <div class="field">
                    <label class="label">Minimum value</label>
                    <div class="control">
                      <input type="number" class="input" placeholder="Minumum Value"
                             [ngClass]="stylesConfig.answersInput"
                             formControlName="min_val">
                    </div>
                  </div>
                  <div class="field">
                    <label class="label">Step size</label>
                    <div class="control">
                      <input type="number" class="input" placeholder="Minumum Value"
                             [ngClass]="stylesConfig.answersInput"
                             formControlName="step">
                    </div>
                  </div>
                  <div class="field">
                    <label class="label">Maximum value</label>
                    <div class="control">
                      <input type="number" class="input" placeholder="Minumum Value"
                             [ngClass]="stylesConfig.answersInput"
                             formControlName="max_val">
                    </div>
                  </div>
                </div>
              </div>
              <!-- Question Type end -->
              <div [ngClass]="stylesConfig.answer" *ngIf="question[i].value.questionType == 'da' ">
                <!-- The repeated address template -->
                <i class="material-icons control" style="opacity:0;">delete_forever</i>
                <i class="material-icons control" style="opacity:0;">delete_forever</i>
                <div [ngClass]="[stylesConfig.fieldHasAdd,'control','expand']">
                  <div class="control expand">
                  <textarea class="textarea" rows="1" placeholder="Explain, what for you need date?"
                            [ngClass]="stylesConfig.answersInput" formControlName="date" inputGrow></textarea>
                  </div>
                </div>
              </div>
              <!-- Question Type end -->
              <div [ngClass]="stylesConfig.answer" *ngIf="question[i].value.questionType == 'ta' ">
                <!-- The repeated address template -->
                <i class="material-icons control" style="opacity:0;">delete_forever</i>
                <i class="material-icons control" style="opacity:0;">delete_forever</i>
                <div [ngClass]="[stylesConfig.fieldHasAdd,'control','expand']">
                  <div class="control expand">
                    <label class="checkbox">
                      <input type="checkbox" formControlName="req">
                      User have to che....
                    </label>
                  </div>
                </div>
              </div>
              <!-- Question Type end -->
            </div>
          </div>
          <!-- answers loop end -->

        </div>

        <div (click)="addAnswer(i)" [ngClass]="[stylesConfig.answer,'nfc-addQuestion']"
             *ngIf="question[i].value.questionType == 'mc' || question[i].value.questionType == 'cb'  || question[i].value.questionType == 'na' ">
          <i (click)="deleteAnswer(i,k)" class="material-icons control">delete_forever</i>
          <i class="material-icons">radio_button_unchecked</i>
          <div [ngClass]="stylesConfig.fieldHasAdd">
            <div class="control expand">
              <textarea class="textarea" rows="1" placeholder="Add Question" [ngClass]="stylesConfig.answersInput"
                        inputGrow disabled></textarea>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- question loop end -->


    <button (click)="addItem()" type="button">question</button>
  </div>

</form>
